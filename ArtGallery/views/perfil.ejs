<!DOCTYPE html>
<html lang="pt-BR">
   <head>
      <meta charset="UTF-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <title><%= title %></title>
      <link rel="icon" href="/img/icon-ag.svg" type="image/x-icon" />
      <link rel="stylesheet" href="/stylesheets/style.css" />
      <link rel="stylesheet" href="/stylesheets/stylePerfil.css" />
      <script src="/javascripts/perfil.js"></script>
   </head>
   <body>
      <div class="topo-logo">
         <h1>ArtGallery</h1>
      </div>

      <header>
         <div class="pesquisa">
            <svg
               xmlns="http://www.w3.org/2000/svg"
               width="16"
               height="16"
               fill="currentColor"
               class="bi bi-search"
               viewBox="0 0 16 16"
            >
               <path
                  d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"
               />
            </svg>
            <input
               type="text"
               placeholder="Encontre seus artistas favoritos aqui"
               id="pesquisa"
            />
         </div>
         <div class="nav">
            <div class="nav-icone">
               <a href="/">
                  <div class="nav-icone-img">
                     <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-house-fill"
                        viewBox="0 0 16 16"
                     >
                        <path
                           d="M8.707 1.5a1 1 0 0 0-1.414 0L.646 8.146a.5.5 0 0 0 .708.708L8 2.207l6.646 6.647a.5.5 0 0 0 .708-.708L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293z"
                        />
                        <path
                           d="m8 3.293 6 6V13.5a1.5 1.5 0 0 1-1.5 1.5h-9A1.5 1.5 0 0 1 2 13.5V9.293z"
                        />
                     </svg>
                  </div>
                  <a id="tit">Início</a>
               </a>
            </div>
            <div class="nav-icone">
               <a href="/explorar">
                  <div class="nav-icone-img">
                     <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-palette-fill"
                        viewBox="0 0 16 16"
                     >
                        <path
                           d="M12.433 10.07C14.133 10.585 16 11.15 16 8a8 8 0 1 0-8 8c1.996 0 1.826-1.504 1.649-3.08-.124-1.101-.252-2.237.351-2.92.465-.527 1.42-.237 2.433.07M8 5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3m4.5 3a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3M5 6.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m.5 6.5a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3"
                        />
                     </svg>
                  </div>
                  <a id="tit">Explorar</a>
               </a>
            </div>
            <div class="nav-icone">
               <a href="/categorias">
                  <div class="nav-icone-img">
                     <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-tag-fill"
                        viewBox="0 0 16 16"
                     >
                        <path
                           d="M2 1a1 1 0 0 0-1 1v4.586a1 1 0 0 0 .293.707l7 7a1 1 0 0 0 1.414 0l4.586-4.586a1 1 0 0 0 0-1.414l-7-7A1 1 0 0 0 6.586 1zm4 3.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"
                        />
                     </svg>
                  </div>
                  <a id="tit">Categorias</a>
               </a>
            </div>
            <div class="nav-icone">
               <a href="/perfil">
                  <div class="nav-icone-img">
                     <svg
                        xmlns="http://www.w3.org/2000/svg"
                        width="16"
                        height="16"
                        fill="currentColor"
                        class="bi bi-person-fill"
                        viewBox="0 0 16 16"
                     >
                        <path
                           d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6"
                        />
                     </svg>
                  </div>
                  <a id="tit">Perfis</a>
               </a>
            </div>
         </div>
      </header>

      <div class="perfil-container">
         <div class="perfil-topo">
            <div class="perfil-avatar"></div>
            <div class="perfil-info">
               <div class="perfil-nome-row">
                  <div class="perfil-nome">
                     <h1 class="perfil-nome-comp"><%= usuario.nome_comp %></h1>
                  </div>
                  <div class="perfil-usu">
                     <p class="perfil-nome-usu">@<%= usuario.nome_usu %></p>
                  </div>
                  <div class="perfil-tipo_usu">
                     <span class="<%= usuario.tipo_usu %>-bg perfil-tipo">
                        <% const tipos = { apr: "Apreciador", adm:
                        "Administrador", art: "Artista" }; %> <%=
                        tipos[usuario.tipo_usu] || "Desconhecido" %>
                     </span>
                  </div>
               </div>
               <div class="perfil-bio_usu">
                  <p class="perfil-bio"><%= usuario.bio_usu %></p>
               </div>
               <div class="perfil-info-row">
                  <div class="botoes-perfil">
                     <div class="perfil-sair">
                        <a class="perfil-botao-sair" href="/logout">Sair</a>
                     </div>
                     <div class="perfil-editar">
                        <a class="perfil-botao-editar" href="">
                           Editar Perfil
                        </a>
                     </div>
                  </div>

                  <div class="perfil-numeros">
                     <span>
                        <p><%= totalSeguidores %></p>
                        Seguidores
                     </span>
                     <span>
                        <p><%= totalSeguindo %></p>
                        Seguindo
                     </span>
                  </div>
               </div>
            </div>
         </div>
         <% if (usuario.tipo_usu === 'art') { %>
         <div id="perfil-favoritos" class="perfil-aba-conteudo hidden">
            <section class="perfil-favoritos">
               <h2>Obras</h2>
               <a class="nova-obra" href="">+ Adicionar nova obra</a>
               <div class="favoritos-grid">
                  <% if (favoritos.length > 0) { %> <% for (var i = 0; i <
                  favoritos.length; i++) { var fav = favoritos[i]; %>
                  <div class="obra-card">
                     <img src="<%= fav.foto %>" alt="<%= fav.nome %>" />
                     <h3><%= fav.nome %></h3>
                     <p><%= fav.art %></p>
                  </div>
                  <% } %> <% } else { %>
                  <p>Você ainda não possui nenhuma obra.</p>
                  <% } %>
               </div>
            </section>
         </div>
         <% } %> <% if (usuario.tipo_usu === 'apr' || usuario.tipo_usu ===
         'adm') { %>
         <div class="perfil-switch-container">
            <div class="perfil-switch-slider"></div>
            <button
               class="ativo"
               onclick="togglePerfilTab('perfil-colecoes', this)"
            >
               Coleções
            </button>
            <button onclick="togglePerfilTab('perfil-favoritos', this) ">
               Favoritos
            </button>
         </div>
         <div class="adicionar">
            <% if (usuario.tipo_usu === 'adm') {%>
            <a class="nova-obra" href="">+ Adicionar nova obra</a>
            <% } %>
         </div>
         <div class="perfil-botoes-centro">
            <div id="perfil-colecoes" class="perfil-aba-conteudo">
               <section class="perfil-mid">
                  <h2>Coleções</h2>
                  <a class="nova-coleção" href="/colecao/criarColecao"
                     >+ Adicionar nova Coleção</a
                  >
                  <div class="colecoes-grid">
                     <% if (colecoes.length > 0) { %> <% for (var i = 0; i <
                     colecoes.length; i++) { var col = colecoes[i]; %>
                     <div class="colecao-card">
                        <img src="<%= col.foto %>" alt="<%= col.nome %>" />
                        <h3><%= col.nome_col %></h3>
                        <p><%= col.nome %></p>
                     </div>
                     <% } %> <% } else { %>
                     <p>Você ainda não criou nenhuma coleção.</p>
                     <% } %>
                  </div>
               </section>
            </div>

            <div id="perfil-favoritos" class="perfil-aba-conteudo hidden">
               <section class="perfil-favoritos">
                  <h2>Favoritos</h2>
                  <div class="favoritos-grid">
                     <% if (favoritos.length > 0) { %> <% for (var i = 0; i <
                     favoritos.length; i++) { var fav = favoritos[i]; %>
                     <div class="obra-card">
                        <img src="<%= fav.foto %>" alt="<%= fav.nome %>" />
                        <h3><%= fav.nome %></h3>
                        <p><%= fav.art %></p>
                     </div>
                     <% } %> <% } else { %>
                     <p>Você ainda não favoritou nenhuma obra.</p>
                     <% } %>
                  </div>
               </section>
            </div>
            <% } %>
         </div>
      </div>

      <footer>
         <p>
            Precisa de ajuda? Contate nosso
            <a href="/suporte"><b>SUPORTE</b></a>
         </p>
         <a href="/">ArtGallery - 2025</a>
      </footer>

      <div class="txt-central">
         <!-- Para remover posteriormente -->
         <% if (usuario && usuario.nome_usu) { %>
         <p>Bem-vindo, <%= usuario.nome_usu %>!</p>
         <a href="/logout">Sair</a>
         <% } else { %>
         <p>Bem-vindo, Visitante!</p>
         <a href="/login">Login</a>
         <% } %>
      </div>
   </body>
</html>
